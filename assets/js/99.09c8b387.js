(window.webpackJsonp=window.webpackJsonp||[]).push([[99],{512:function(e,t,s){"use strict";s.r(t);var a=s(1),r=Object(a.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"mysql-explain详解"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mysql-explain详解"}},[e._v("#")]),e._v(" "),t("strong",[e._v("MySQL-EXPLAIN详解")])]),e._v(" "),t("h1",{attrs:{id:"_0-explain思维导图"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_0-explain思维导图"}},[e._v("#")]),e._v(" 0. "),t("strong",[e._v("EXPLAIN")]),e._v("思维导图")]),e._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.nlark.com/yuque/0/2021/png/10385897/1616847727549-6587e750-764d-4b63-8589-10aaae40a04c.png",alt:"img"}})]),e._v(" "),t("p",[e._v("图片来自：https://learnku.com/articles/38719")]),e._v(" "),t("h1",{attrs:{id:"_1-explain简介"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-explain简介"}},[e._v("#")]),e._v(" 1. "),t("strong",[e._v("EXPLAIN")]),e._v("简介")]),e._v(" "),t("p",[e._v("使用EXPLAIN关键字可以模拟优化器执行SQL查询select语句，从而知道MySQL是如何处理你的SQL语句的。分析你的查询语句或是表结构的性能瓶颈。")]),e._v(" "),t("p",[e._v("➤ "),t("strong",[e._v("通过EXPLAIN，我们可以分析出以下结果：")])]),e._v(" "),t("ul",[t("li",[e._v("表的读取顺序")]),e._v(" "),t("li",[e._v("数据读取操作的操作类型")]),e._v(" "),t("li",[e._v("哪些索引可以使用")]),e._v(" "),t("li",[e._v("哪些索引被实际使用")]),e._v(" "),t("li",[e._v("表之间的引用")]),e._v(" "),t("li",[e._v("每张表有多少行被优化器查询")])]),e._v(" "),t("p",[e._v("➤ "),t("strong",[e._v("使用方式如下：")])]),e._v(" "),t("p",[e._v("EXPLAIN +SQL select语句：")]),e._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("EXPLAIN")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("SELECT")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("*")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("FROM")]),e._v(" t1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("p",[e._v("执行计划包含的信息:")]),e._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.nlark.com/yuque/0/2021/png/10385897/1616847422887-7c8941c9-f0e0-4a3c-8225-1103db414e77.png",alt:"img"}})]),e._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token number"}},[e._v("1.")]),e._v(" id "),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("//select查询的序列号，包含一组数字，表示查询中执行select子句或操作表的顺序")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("2.")]),e._v(" select_type "),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("//查询类型")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("3.")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("table")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("//正在访问哪个表")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("4.")]),e._v(" partitions "),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("//匹配的分区")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("5.")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("type")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("//访问的类型,从最好到最差依次是：system > const > eq_ref > ref > range > index > all一般来说，得保证查询至少达到range级别，最好能达到ref。")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("6.")]),e._v(" possible_keys "),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("//显示可能应用在这张表中的索引，一个或多个，但不一定实际使用到")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("7.")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("key")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("//实际使用到的索引，如果为NULL，则没有使用索引")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("8.")]),e._v(" key_len "),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("//表示索引中使用的字节数，可通过该列计算查询中使用的索引的长度")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("9.")]),e._v(" ref "),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("//显示索引的哪一列被使用了，如果可能的话，是一个常数，哪些列或常量被用于查找索引列上的值")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("10.")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("rows")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("//根据表统计信息及索引选用情况，大致估算出找到所需的记录所需读取的行数")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("11.")]),e._v(" filtered "),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("//查询的表行占表的百分比")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[e._v("12.")]),e._v(" Extra "),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("//包含不适合在其它列中显示但十分重要的额外信息")]),e._v("\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br"),t("span",{staticClass:"line-number"},[e._v("6")]),t("br"),t("span",{staticClass:"line-number"},[e._v("7")]),t("br"),t("span",{staticClass:"line-number"},[e._v("8")]),t("br"),t("span",{staticClass:"line-number"},[e._v("9")]),t("br"),t("span",{staticClass:"line-number"},[e._v("10")]),t("br"),t("span",{staticClass:"line-number"},[e._v("11")]),t("br"),t("span",{staticClass:"line-number"},[e._v("12")]),t("br")])]),t("h1",{attrs:{id:"_2-explain结果中各字段含义"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-explain结果中各字段含义"}},[e._v("#")]),e._v(" 2. explain结果中各字段含义")]),e._v(" "),t("h2",{attrs:{id:"_2-1-id"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-id"}},[e._v("#")]),e._v(" 2.1 id")]),e._v(" "),t("p",[e._v("select查询的序列号，包含一组数字，表示查询中执行select子句或操作表的顺序")]),e._v(" "),t("p",[t("strong",[e._v("id的结果共有3中情况")])]),e._v(" "),t("ul",[t("li",[e._v("id相同，执行顺序由上至下\n"),t("img",{attrs:{src:"https://cdn.nlark.com/yuque/0/2021/png/10385897/1616847422883-665b5b25-9ae9-4287-94c4-2155d5bc3454.png",alt:"img"}}),e._v(" "),t("strong",[e._v("[总结]")]),e._v(" 加载表的顺序如上图table列所示：t1 t3 t2")]),e._v(" "),t("li",[e._v("id不同，如果是子查询，id的序号会递增，id值越大优先级越高，越先被执行")])]),e._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.nlark.com/yuque/0/2021/png/10385897/1616847422922-556c269d-3f92-4c81-baff-29d53150df8c.png",alt:"img"}})]),e._v(" "),t("ul",[t("li",[e._v("id相同不同，同时存在\n"),t("img",{attrs:{src:"https://cdn.nlark.com/yuque/0/2021/png/10385897/1616847422899-f4fdd21b-667a-4c09-91ff-8e75bc909a82.png",alt:"img"}}),e._v("\n如上图所示，在id为1时，table显示的是 "),t("code",[e._v("<derived2>")]),e._v(" ,这里指的是指向id为2的表，即t3表的衍生表。")])]),e._v(" "),t("h2",{attrs:{id:"_2-2-select-type"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-select-type"}},[e._v("#")]),e._v(" 2.2 select_type")]),e._v(" "),t("p",[e._v("常见和常用的值有如下几种：")]),e._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.nlark.com/yuque/0/2021/png/10385897/1616847422921-623abfcd-7384-4539-aeaa-bd6fdfc49626.png",alt:"img"}})]),e._v(" "),t("p",[e._v("分别用来表示查询的类型，主要是用于区别普通查询、联合查询、子查询等的复杂查询。")]),e._v(" "),t("ul",[t("li",[e._v("SIMPLE "),t("code",[e._v("简单的select查询")]),e._v("，查询中"),t("code",[e._v("不包含子查询或者UNION")])]),e._v(" "),t("li",[e._v("PRIMARY 查询中若"),t("code",[e._v("包含任何复杂的")]),e._v("子部分，"),t("code",[e._v("最外层查询则被标记为PRIMARY")])]),e._v(" "),t("li",[e._v("SUBQUERY "),t("code",[e._v("在SELECT或WHERE列表中包含了子查询")])]),e._v(" "),t("li",[e._v("DERIVED 在FROM列表中包含的"),t("code",[e._v("子查询被标记为DERIVED")]),e._v("（衍生），MySQL会递归执行这些子查询，把"),t("code",[e._v("结果放在临时表")]),e._v("中")]),e._v(" "),t("li",[e._v("UNION 若第二个SELECT出现在UNION之后，则被标记为UNION：若UNION包含在FROM子句的子查询中，外层SELECT将被标记为：DERIVED")]),e._v(" "),t("li",[e._v("UNION RESULT 从UNION表获取结果的SELECT")])]),e._v(" "),t("h2",{attrs:{id:"_2-3-table"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-table"}},[e._v("#")]),e._v(" 2.3 table")]),e._v(" "),t("p",[e._v("指的就是当前select执行的表")]),e._v(" "),t("h2",{attrs:{id:"_2-4-type"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-type"}},[e._v("#")]),e._v(" 2.4 type")]),e._v(" "),t("p",[e._v("type所显示的是查询使用了哪种类型，type包含的类型包括如下图所示的几种：")]),e._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.nlark.com/yuque/0/2021/png/10385897/1616847422907-ddb28eb6-cb50-4e59-8abd-19ef2f1c2be0.png",alt:"img"}})]),e._v(" "),t("p",[e._v("从最好到最差依次是："),t("code",[e._v("system > ``const")]),e._v(" "),t("code",[e._v("> eq_ref > ref > range > index > all")])]),e._v(" "),t("p",[t("strong",[e._v("一般来说，得保证查询至少达到range级别，最好能达到ref。")])]),e._v(" "),t("ul",[t("li",[t("code",[e._v("system")]),e._v(" 表只有一行记录（等于系统表），这是const类型的特列，平时不会出现，这个也可以忽略不计")]),e._v(" "),t("li",[t("code",[e._v("const")]),e._v(" 表示通过索引一次就找到了，const用于比较primary key 或者unique索引。因为只匹配一行数据，所以很快。如将主键置于where列表中，MySQL就能将该查询转换为一个常量。\n"),t("img",{attrs:{src:"https://cdn.nlark.com/yuque/0/2021/png/10385897/1616847422915-b665eacc-6f29-47b4-a182-c217436ba7ef.png",alt:"img"}}),e._v("\n首先进行子查询得到一个结果的d1临时表，子查询条件为id = 1 是常量，所以type是const，id为1的相当于只查询一条记录，所以type为system。")]),e._v(" "),t("li",[t("code",[e._v("eq_ref")]),e._v(" 唯一性索引扫描，对于每个索引键，表中只有一条记录与之匹配。常见于主键或唯一索引扫描")]),e._v(" "),t("li",[t("code",[e._v("ref")]),e._v(" 非唯一性索引扫描，返回匹配某个单独值的所有行，本质上也是一种索引访问，它返回所有匹配某个单独值的行，然而，它可能会找到多个符合条件的行，所以他应该属于查找和扫描的混合体。\n"),t("img",{attrs:{src:"https://cdn.nlark.com/yuque/0/2021/png/10385897/1616847422980-0e630006-1da1-4eac-9d08-a83bf9cd336c.png",alt:"img"}})]),e._v(" "),t("li",[t("code",[e._v("range")]),e._v(" 只检索给定范围的行，使用一个索引来选择行，key列显示使用了哪个索引，一般就是在你的where语句中出现between、< 、>、in等的查询，这种范围扫描索引比全表扫描要好，因为它只需要开始于索引的某一点，而结束于另一点，不用扫描全部索引。\n"),t("img",{attrs:{src:"https://cdn.nlark.com/yuque/0/2021/png/10385897/1616847422910-38556687-4984-40e3-b6fd-130b54a3a631.png",alt:"img"}})]),e._v(" "),t("li",[t("code",[e._v("index")]),e._v(" Full Index Scan，Index与All区别为index类型只遍历索引树。这通常比ALL快，因为索引文件通常比数据文件小。（也就是说虽然all和Index都是读全表，但index是从索引中读取的，而all是从硬盘读取的）\n"),t("img",{attrs:{src:"https://cdn.nlark.com/yuque/0/2021/png/10385897/1616847422944-89a71c22-15d1-4b7e-bcef-4e7d78e13d9f.png",alt:"img"}}),e._v("\nid是主键，所以存在主键索引")]),e._v(" "),t("li",[t("code",[e._v("all")]),e._v(" Full Table Scan 将遍历全表以找到匹配的行\n"),t("img",{attrs:{src:"https://cdn.nlark.com/yuque/0/2021/png/10385897/1616847422961-05e60ef1-06cd-4ede-84ce-b5bbd6e6492b.png",alt:"img"}})])]),e._v(" "),t("h2",{attrs:{id:"_2-5-possible-keys-和-key"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-possible-keys-和-key"}},[e._v("#")]),e._v(" 2.5 possible_keys 和 key")]),e._v(" "),t("p",[t("code",[e._v("possible_keys")]),e._v(" 显示可能应用在这张表中的索引，一个或多个。查询涉及到的字段上若存在索引，则该索引将被列出，"),t("strong",[e._v("但不一定被查询实际使用")]),e._v("。")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("key\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("ul",[t("li",[e._v("实际使用的索引，如果为NULL，则没有使用索引。（可能原因包括没有建立索引或索引失效）\n"),t("img",{attrs:{src:"https://cdn.nlark.com/yuque/0/2021/png/10385897/1616847423054-1194baba-91ed-4841-8af0-cf76fcb11871.png",alt:"img"}})]),e._v(" "),t("li",[e._v("查询中若使用了"),t("code",[e._v("覆盖索引")]),e._v("（select 后要查询的字段刚好和创建的索引字段完全相同），则该索引仅出现在key列表中\n"),t("img",{attrs:{src:"https://cdn.nlark.com/yuque/0/2021/png/10385897/1616847422966-3cd9985e-46eb-4efd-8867-126df146c053.png",alt:"img"}}),e._v(" "),t("img",{attrs:{src:"https://cdn.nlark.com/yuque/0/2021/png/10385897/1616847422968-aa5df203-a0c4-4624-ac6c-014e86d0e684.png",alt:"img"}})])]),e._v(" "),t("h2",{attrs:{id:"_2-6-key-len"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-6-key-len"}},[e._v("#")]),e._v(" 2.6 key_len")]),e._v(" "),t("p",[e._v("表示索引中使用的字节数，可通过该列计算查询中使用的索引的长度，在"),t("code",[e._v("不损失精确性的情况下，长度越短越好")]),e._v("。key_len显示的值为索引字段的最大可能长度，并非实际使用长度，即key_len是根据表定义计算而得，不是通过表内检索出的。")]),e._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.nlark.com/yuque/0/2021/png/10385897/1616847422976-e0b41ce5-3ec2-44d6-b8ab-bf0002bbbbd0.png",alt:"img"}})]),e._v(" "),t("h2",{attrs:{id:"_2-7-ref"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-7-ref"}},[e._v("#")]),e._v(" 2.7 ref")]),e._v(" "),t("p",[e._v("显示索引的那一列被使用了，如果可能的话，最好是一个常数。哪些列或常量被用于查找索引列上的值。")]),e._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.nlark.com/yuque/0/2021/png/10385897/1616847422962-7778749b-9e21-4403-a030-530676dd8753.png",alt:"img"}})]),e._v(" "),t("h2",{attrs:{id:"_2-8-rows"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-8-rows"}},[e._v("#")]),e._v(" 2.8 rows")]),e._v(" "),t("p",[e._v("根据表统计信息及索引选用情况，大致估算出找到所需的记录所需要读取的行数，也就是说，用的越少越好")]),e._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.nlark.com/yuque/0/2021/png/10385897/1616847423012-402746a9-20b1-44e7-8b93-de7514860251.png",alt:"img"}})]),e._v(" "),t("h2",{attrs:{id:"_2-9-extra"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-9-extra"}},[e._v("#")]),e._v(" 2.9 Extra")]),e._v(" "),t("p",[e._v("包含不适合在其他列中显式但十分重要的额外信息")]),e._v(" "),t("h3",{attrs:{id:"_2-9-1-using-filesort-九死一生"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-9-1-using-filesort-九死一生"}},[e._v("#")]),e._v(" 2.9.1 Using filesort（九死一生）")]),e._v(" "),t("p",[e._v("说明mysql会对数据使用一个外部的索引排序，而不是按照表内的索引顺序进行读取。MySQL中无法利用索引完成的排序操作称为“文件排序”。")]),e._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.nlark.com/yuque/0/2021/png/10385897/1616847422955-f4fff67a-1136-4423-abb2-56031238f901.png",alt:"img"}})]),e._v(" "),t("h3",{attrs:{id:"_2-9-2-using-temporary-十死无生"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-9-2-using-temporary-十死无生"}},[e._v("#")]),e._v(" 2.9.2 Using temporary（十死无生）")]),e._v(" "),t("p",[e._v("使用了用临时表保存中间结果，MySQL在对查询结果排序时使用临时表。常见于排序order by和分组查询group by。")]),e._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.nlark.com/yuque/0/2021/png/10385897/1616847422951-a5b1badd-0ee0-4f51-b8df-c39923e33353.png",alt:"img"}})]),e._v(" "),t("h3",{attrs:{id:"_2-9-3-using-index-发财了"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-9-3-using-index-发财了"}},[e._v("#")]),e._v(" 2.9.3 Using index（发财了）")]),e._v(" "),t("p",[e._v("表示相应的select操作中使用了覆盖索引（Covering Index），避免访问了表的数据行，效率不错。如果同时出现using where，表明索引被用来执行索引键值的查找；如果没有同时出现using where，表明索引用来读取数据而非执行查找动作。")]),e._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.nlark.com/yuque/0/2021/png/10385897/1616847423279-e4415471-0f0a-4e01-9335-8945afc63085.png",alt:"img"}})]),e._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.nlark.com/yuque/0/2021/png/10385897/1616847422957-bf737458-7f2c-42a0-a095-79f3b2f9692f.png",alt:"img"}})]),e._v(" "),t("h3",{attrs:{id:"_2-9-4-using-where"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-9-4-using-where"}},[e._v("#")]),e._v(" 2.9.4 Using where")]),e._v(" "),t("p",[e._v("表明使用了where过滤")]),e._v(" "),t("h3",{attrs:{id:"_2-9-5-using-join-buffer"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-9-5-using-join-buffer"}},[e._v("#")]),e._v(" 2.9.5 Using join buffer")]),e._v(" "),t("p",[e._v("表明使用了连接缓存,比如说在查询的时候，多表join的次数非常多，那么将配置文件中的缓冲区的join buffer调大一些。")]),e._v(" "),t("h3",{attrs:{id:"_2-9-6-impossible-where"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-9-6-impossible-where"}},[e._v("#")]),e._v(" 2.9.6 impossible where")]),e._v(" "),t("p",[e._v("where子句的值"),t("code",[e._v("总是false")]),e._v("，不能用来获取任何元组:")]),e._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("SELECT")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("*")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("FROM")]),e._v(" t_user "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("WHERE")]),e._v(" id "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v("'1'")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("and")]),e._v(" id "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v("'2'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("h3",{attrs:{id:"_2-9-7-select-tables-optimized-away"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-9-7-select-tables-optimized-away"}},[e._v("#")]),e._v(" 2.9.7 select tables optimized away")]),e._v(" "),t("p",[e._v("在没有GROUPBY子句的情况下，基于索引优化MIN/MAX操作或者对于MyISAM存储引擎优化COUNT(*)操作，不必等到执行阶段再进行计算，查询执行计划生成的阶段即完成优化。")]),e._v(" "),t("h3",{attrs:{id:"_2-9-8-distinct"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-9-8-distinct"}},[e._v("#")]),e._v(" 2.9.8 distinct")]),e._v(" "),t("p",[e._v("优化distinct操作，在找到第一匹配的元组后即停止找同样值的动作")]),e._v(" "),t("h1",{attrs:{id:"_3-explain案例分析"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-explain案例分析"}},[e._v("#")]),e._v(" 3. explain案例分析")]),e._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.nlark.com/yuque/0/2021/png/10385897/1616847422954-c311c3f5-163b-4fef-8aba-a068f50f7022.png",alt:"img"}})]),e._v(" "),t("ul",[t("li",[e._v("执行顺序1：select_type为UNION，说明第四个select是UNION里的第二个select，最先执行【select name,id from t2】")]),e._v(" "),t("li",[e._v("执行顺序2：id为3，是整个查询中第三个select的一部分。因查询包含在from中，所以为DERIVED【select id,name from t1 where other_column=’’】")]),e._v(" "),t("li",[e._v("执行顺序3：select列表中的子查询select_type为subquery,为整个查询中的第二个select【select id from t3】")]),e._v(" "),t("li",[e._v("执行顺序4：id列为1，表示是UNION里的第一个select，select_type列的primary表示该查询为外层查询，table列被标记为"),t("code",[e._v("<derived3>")]),e._v(",表示查询结果来自一个衍生表，其中derived3中的3代表该查询衍生自第三个select查询，即id为3的select。【select d1.name …】")]),e._v(" "),t("li",[e._v("执行顺序5：代表从UNION的临时表中读取行的阶段，table列的< union1,4 >表示用第一个和第四个select的结果进行UNION操作。【两个结果union操作】")])]),e._v(" "),t("h1",{attrs:{id:"_4-参考"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-参考"}},[e._v("#")]),e._v(" 4. 参考")]),e._v(" "),t("ul",[t("li",[e._v("本文转载自：https://m.php.cn/article/454417.html")]),e._v(" "),t("li",[e._v("https://www.cnblogs.com/xuanzhi201111/p/4175635.html")]),e._v(" "),t("li",[e._v("思维导图：https://learnku.com/articles/38719")])])])}),[],!1,null,null,null);t.default=r.exports}}]);