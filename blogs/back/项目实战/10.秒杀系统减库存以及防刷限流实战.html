<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>秒杀系统减库存以及防刷限流实战 | 编程印象</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="我盼世界无 bug">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/assets/css/0.styles.6ae13786.css" as="style"><link rel="preload" href="/assets/js/app.d528fc5a.js" as="script"><link rel="preload" href="/assets/js/3.fb47a76d.js" as="script"><link rel="preload" href="/assets/js/1.fc79f8d4.js" as="script"><link rel="preload" href="/assets/js/205.177b11ad.js" as="script"><link rel="prefetch" href="/assets/js/10.23520678.js"><link rel="prefetch" href="/assets/js/100.a3f3fcd8.js"><link rel="prefetch" href="/assets/js/101.c03427e8.js"><link rel="prefetch" href="/assets/js/102.53540e29.js"><link rel="prefetch" href="/assets/js/103.0a77f3db.js"><link rel="prefetch" href="/assets/js/104.b01dfd5e.js"><link rel="prefetch" href="/assets/js/105.773d410b.js"><link rel="prefetch" href="/assets/js/106.149504d9.js"><link rel="prefetch" href="/assets/js/107.a678b1f2.js"><link rel="prefetch" href="/assets/js/108.27b77775.js"><link rel="prefetch" href="/assets/js/109.adb21565.js"><link rel="prefetch" href="/assets/js/11.fe074254.js"><link rel="prefetch" href="/assets/js/110.cd13288b.js"><link rel="prefetch" href="/assets/js/111.9d17b49b.js"><link rel="prefetch" href="/assets/js/112.7028cd47.js"><link rel="prefetch" href="/assets/js/113.b8baf087.js"><link rel="prefetch" href="/assets/js/114.71df5a76.js"><link rel="prefetch" href="/assets/js/115.e9afb989.js"><link rel="prefetch" href="/assets/js/116.4f064770.js"><link rel="prefetch" href="/assets/js/117.fae32ae9.js"><link rel="prefetch" href="/assets/js/118.84c56580.js"><link rel="prefetch" href="/assets/js/119.36a01b08.js"><link rel="prefetch" href="/assets/js/12.eda7a35e.js"><link rel="prefetch" href="/assets/js/120.200597af.js"><link rel="prefetch" href="/assets/js/121.4dabe980.js"><link rel="prefetch" href="/assets/js/122.0a8a2f37.js"><link rel="prefetch" href="/assets/js/123.04d97bb7.js"><link rel="prefetch" href="/assets/js/124.9b7eb60a.js"><link rel="prefetch" href="/assets/js/125.4074ae11.js"><link rel="prefetch" href="/assets/js/126.12334dba.js"><link rel="prefetch" href="/assets/js/127.d418e21c.js"><link rel="prefetch" href="/assets/js/128.9ce6ff81.js"><link rel="prefetch" href="/assets/js/129.1fcbe75e.js"><link rel="prefetch" href="/assets/js/13.ca49d663.js"><link rel="prefetch" href="/assets/js/130.604761c0.js"><link rel="prefetch" href="/assets/js/131.2501fe9a.js"><link rel="prefetch" href="/assets/js/132.7114fb4a.js"><link rel="prefetch" href="/assets/js/133.8b85831d.js"><link rel="prefetch" href="/assets/js/134.f0120113.js"><link rel="prefetch" href="/assets/js/135.83662761.js"><link rel="prefetch" href="/assets/js/136.1187b42c.js"><link rel="prefetch" href="/assets/js/137.5d7e9a59.js"><link rel="prefetch" href="/assets/js/138.c559e354.js"><link rel="prefetch" href="/assets/js/139.df4a3c01.js"><link rel="prefetch" href="/assets/js/14.3982ea7b.js"><link rel="prefetch" href="/assets/js/140.31afd163.js"><link rel="prefetch" href="/assets/js/141.ce2dcc20.js"><link rel="prefetch" href="/assets/js/142.00aa4983.js"><link rel="prefetch" href="/assets/js/143.cc2e2d2c.js"><link rel="prefetch" href="/assets/js/144.335c8d35.js"><link rel="prefetch" href="/assets/js/145.1469c8d2.js"><link rel="prefetch" href="/assets/js/146.00b34415.js"><link rel="prefetch" href="/assets/js/147.b40ff080.js"><link rel="prefetch" href="/assets/js/148.6ddc8474.js"><link rel="prefetch" href="/assets/js/149.36b0a8d2.js"><link rel="prefetch" href="/assets/js/15.7a357734.js"><link rel="prefetch" href="/assets/js/150.3ad3a15d.js"><link rel="prefetch" href="/assets/js/151.c942252d.js"><link rel="prefetch" href="/assets/js/152.573f7e72.js"><link rel="prefetch" href="/assets/js/153.aa99ca9d.js"><link rel="prefetch" href="/assets/js/154.436e05cb.js"><link rel="prefetch" href="/assets/js/155.43b3d7ce.js"><link rel="prefetch" href="/assets/js/156.04bc23af.js"><link rel="prefetch" href="/assets/js/157.b1951c4a.js"><link rel="prefetch" href="/assets/js/158.84dd5fd1.js"><link rel="prefetch" href="/assets/js/159.36db5e3b.js"><link rel="prefetch" href="/assets/js/16.d4b6a003.js"><link rel="prefetch" href="/assets/js/160.00f86486.js"><link rel="prefetch" href="/assets/js/161.71a8ddba.js"><link rel="prefetch" href="/assets/js/162.3bf1dd55.js"><link rel="prefetch" href="/assets/js/163.c8330939.js"><link rel="prefetch" href="/assets/js/164.0698b94d.js"><link rel="prefetch" href="/assets/js/165.e75c4728.js"><link rel="prefetch" href="/assets/js/166.3e9cf934.js"><link rel="prefetch" href="/assets/js/167.34a9d9c5.js"><link rel="prefetch" href="/assets/js/168.e7392710.js"><link rel="prefetch" href="/assets/js/169.13c08020.js"><link rel="prefetch" href="/assets/js/17.32c38667.js"><link rel="prefetch" href="/assets/js/170.7f07be97.js"><link rel="prefetch" href="/assets/js/171.d97936a0.js"><link rel="prefetch" href="/assets/js/172.000929ec.js"><link rel="prefetch" href="/assets/js/173.db036245.js"><link rel="prefetch" href="/assets/js/174.0f738e1b.js"><link rel="prefetch" href="/assets/js/175.ec0ca914.js"><link rel="prefetch" href="/assets/js/176.81308ed2.js"><link rel="prefetch" href="/assets/js/177.9803970c.js"><link rel="prefetch" href="/assets/js/178.83b66f49.js"><link rel="prefetch" href="/assets/js/179.b63bd0f3.js"><link rel="prefetch" href="/assets/js/18.dbb5b6fc.js"><link rel="prefetch" href="/assets/js/180.143a9591.js"><link rel="prefetch" href="/assets/js/181.86d08742.js"><link rel="prefetch" href="/assets/js/182.0ba6a079.js"><link rel="prefetch" href="/assets/js/183.6aa71a40.js"><link rel="prefetch" href="/assets/js/184.ef8892ae.js"><link rel="prefetch" href="/assets/js/185.707b346d.js"><link rel="prefetch" href="/assets/js/186.f8e7cd28.js"><link rel="prefetch" href="/assets/js/187.42754a33.js"><link rel="prefetch" href="/assets/js/188.5fd0aedb.js"><link rel="prefetch" href="/assets/js/189.ed0f4055.js"><link rel="prefetch" href="/assets/js/19.eec53f2c.js"><link rel="prefetch" href="/assets/js/190.8c6e5717.js"><link rel="prefetch" href="/assets/js/191.65f541c4.js"><link rel="prefetch" href="/assets/js/192.5c43a8bd.js"><link rel="prefetch" href="/assets/js/193.81bc7f25.js"><link rel="prefetch" href="/assets/js/194.f83bc039.js"><link rel="prefetch" href="/assets/js/195.1150d412.js"><link rel="prefetch" href="/assets/js/196.9da08e5d.js"><link rel="prefetch" href="/assets/js/197.4028d18c.js"><link rel="prefetch" href="/assets/js/198.66d0d57d.js"><link rel="prefetch" href="/assets/js/199.6d8897e6.js"><link rel="prefetch" href="/assets/js/20.92ce9da7.js"><link rel="prefetch" href="/assets/js/200.03c859b2.js"><link rel="prefetch" href="/assets/js/201.984306db.js"><link rel="prefetch" href="/assets/js/202.26e6b102.js"><link rel="prefetch" href="/assets/js/203.1ec2b82b.js"><link rel="prefetch" href="/assets/js/204.64cce10f.js"><link rel="prefetch" href="/assets/js/206.9cfcb37c.js"><link rel="prefetch" href="/assets/js/207.3fec5166.js"><link rel="prefetch" href="/assets/js/208.b2b3ce0e.js"><link rel="prefetch" href="/assets/js/209.67a2a250.js"><link rel="prefetch" href="/assets/js/21.6ea1f118.js"><link rel="prefetch" href="/assets/js/210.bf8ae6ce.js"><link rel="prefetch" href="/assets/js/211.e544d556.js"><link rel="prefetch" href="/assets/js/212.8d8c7587.js"><link rel="prefetch" href="/assets/js/213.abed6589.js"><link rel="prefetch" href="/assets/js/214.0f9944ec.js"><link rel="prefetch" href="/assets/js/215.3abb9315.js"><link rel="prefetch" href="/assets/js/216.4cfbb37d.js"><link rel="prefetch" href="/assets/js/217.02e74c53.js"><link rel="prefetch" href="/assets/js/218.d3aa4995.js"><link rel="prefetch" href="/assets/js/219.e9a5b435.js"><link rel="prefetch" href="/assets/js/22.842e59f6.js"><link rel="prefetch" href="/assets/js/220.4a15c235.js"><link rel="prefetch" href="/assets/js/221.b89fa9ad.js"><link rel="prefetch" href="/assets/js/222.c4491783.js"><link rel="prefetch" href="/assets/js/223.12e774d3.js"><link rel="prefetch" href="/assets/js/224.50a460f5.js"><link rel="prefetch" href="/assets/js/225.1d696550.js"><link rel="prefetch" href="/assets/js/226.e9e02035.js"><link rel="prefetch" href="/assets/js/227.5d400260.js"><link rel="prefetch" href="/assets/js/228.c1e41843.js"><link rel="prefetch" href="/assets/js/229.ee9ff5cd.js"><link rel="prefetch" href="/assets/js/23.34df94bc.js"><link rel="prefetch" href="/assets/js/230.563911d0.js"><link rel="prefetch" href="/assets/js/231.63b862bb.js"><link rel="prefetch" href="/assets/js/232.574680ef.js"><link rel="prefetch" href="/assets/js/233.500b4540.js"><link rel="prefetch" href="/assets/js/234.39e688fa.js"><link rel="prefetch" href="/assets/js/235.df0c6396.js"><link rel="prefetch" href="/assets/js/236.adb8924b.js"><link rel="prefetch" href="/assets/js/237.843d60ec.js"><link rel="prefetch" href="/assets/js/238.f468df43.js"><link rel="prefetch" href="/assets/js/239.ab27c775.js"><link rel="prefetch" href="/assets/js/24.6c90b0ea.js"><link rel="prefetch" href="/assets/js/240.d3d25272.js"><link rel="prefetch" href="/assets/js/241.4325d118.js"><link rel="prefetch" href="/assets/js/242.5905abf2.js"><link rel="prefetch" href="/assets/js/243.7c218310.js"><link rel="prefetch" href="/assets/js/244.db29dd58.js"><link rel="prefetch" href="/assets/js/245.9154cffb.js"><link rel="prefetch" href="/assets/js/246.54f8e9f4.js"><link rel="prefetch" href="/assets/js/247.b8b26d07.js"><link rel="prefetch" href="/assets/js/248.0a8b304c.js"><link rel="prefetch" href="/assets/js/249.bc01c959.js"><link rel="prefetch" href="/assets/js/25.3f332173.js"><link rel="prefetch" href="/assets/js/250.8d8de801.js"><link rel="prefetch" href="/assets/js/251.5229ac3c.js"><link rel="prefetch" href="/assets/js/252.296d7d7a.js"><link rel="prefetch" href="/assets/js/253.8588f0f5.js"><link rel="prefetch" href="/assets/js/254.1fb1b690.js"><link rel="prefetch" href="/assets/js/255.c078e16a.js"><link rel="prefetch" href="/assets/js/256.ab1a8ab1.js"><link rel="prefetch" href="/assets/js/257.48710f02.js"><link rel="prefetch" href="/assets/js/258.f2501b24.js"><link rel="prefetch" href="/assets/js/259.808d3235.js"><link rel="prefetch" href="/assets/js/26.47aabc69.js"><link rel="prefetch" href="/assets/js/27.c2ef5127.js"><link rel="prefetch" href="/assets/js/28.9ed7ca3f.js"><link rel="prefetch" href="/assets/js/29.144ef134.js"><link rel="prefetch" href="/assets/js/30.c7f25cb6.js"><link rel="prefetch" href="/assets/js/31.5ca545e1.js"><link rel="prefetch" href="/assets/js/32.fa939df6.js"><link rel="prefetch" href="/assets/js/33.6331265b.js"><link rel="prefetch" href="/assets/js/34.8fdd0791.js"><link rel="prefetch" href="/assets/js/35.0c270755.js"><link rel="prefetch" href="/assets/js/36.55b300d9.js"><link rel="prefetch" href="/assets/js/37.f98cd57f.js"><link rel="prefetch" href="/assets/js/38.f65c51b9.js"><link rel="prefetch" href="/assets/js/39.c1ed984c.js"><link rel="prefetch" href="/assets/js/4.35359649.js"><link rel="prefetch" href="/assets/js/40.5d706ed5.js"><link rel="prefetch" href="/assets/js/41.c3fdac65.js"><link rel="prefetch" href="/assets/js/42.787d2e7b.js"><link rel="prefetch" href="/assets/js/43.2f24b558.js"><link rel="prefetch" href="/assets/js/44.ec8c5f1b.js"><link rel="prefetch" href="/assets/js/45.e576c0f0.js"><link rel="prefetch" href="/assets/js/46.b1eb8580.js"><link rel="prefetch" href="/assets/js/47.a4fe36d0.js"><link rel="prefetch" href="/assets/js/48.27860a73.js"><link rel="prefetch" href="/assets/js/49.ca0c5d09.js"><link rel="prefetch" href="/assets/js/5.6361159c.js"><link rel="prefetch" href="/assets/js/50.7fcc65ba.js"><link rel="prefetch" href="/assets/js/51.dfaa9c06.js"><link rel="prefetch" href="/assets/js/52.a59a017f.js"><link rel="prefetch" href="/assets/js/53.b0fe9344.js"><link rel="prefetch" href="/assets/js/54.ef690437.js"><link rel="prefetch" href="/assets/js/55.31950b84.js"><link rel="prefetch" href="/assets/js/56.3b738de6.js"><link rel="prefetch" href="/assets/js/57.b7757b3c.js"><link rel="prefetch" href="/assets/js/58.0ea4a1e2.js"><link rel="prefetch" href="/assets/js/59.273e5f17.js"><link rel="prefetch" href="/assets/js/6.6b20e148.js"><link rel="prefetch" href="/assets/js/60.f088e1c8.js"><link rel="prefetch" href="/assets/js/61.0e0ddee2.js"><link rel="prefetch" href="/assets/js/62.f2edf6a6.js"><link rel="prefetch" href="/assets/js/63.44569bb4.js"><link rel="prefetch" href="/assets/js/64.ee9caa81.js"><link rel="prefetch" href="/assets/js/65.0bd59879.js"><link rel="prefetch" href="/assets/js/66.5aaca33a.js"><link rel="prefetch" href="/assets/js/67.1fa972c6.js"><link rel="prefetch" href="/assets/js/68.3201c557.js"><link rel="prefetch" href="/assets/js/69.9192e517.js"><link rel="prefetch" href="/assets/js/7.e9deccd6.js"><link rel="prefetch" href="/assets/js/70.ceb3c48e.js"><link rel="prefetch" href="/assets/js/71.be19e4ba.js"><link rel="prefetch" href="/assets/js/72.d556dedc.js"><link rel="prefetch" href="/assets/js/73.a7325892.js"><link rel="prefetch" href="/assets/js/74.8a28d8f9.js"><link rel="prefetch" href="/assets/js/75.9281e36a.js"><link rel="prefetch" href="/assets/js/76.f4f1e63c.js"><link rel="prefetch" href="/assets/js/77.826f691d.js"><link rel="prefetch" href="/assets/js/78.984c7b04.js"><link rel="prefetch" href="/assets/js/79.493ea1df.js"><link rel="prefetch" href="/assets/js/8.6d109cee.js"><link rel="prefetch" href="/assets/js/80.333ecb34.js"><link rel="prefetch" href="/assets/js/81.9fa18f27.js"><link rel="prefetch" href="/assets/js/82.650574bd.js"><link rel="prefetch" href="/assets/js/83.97e51bfb.js"><link rel="prefetch" href="/assets/js/84.0c23e288.js"><link rel="prefetch" href="/assets/js/85.0bbc4eeb.js"><link rel="prefetch" href="/assets/js/86.75d2d4e3.js"><link rel="prefetch" href="/assets/js/87.b9a5babc.js"><link rel="prefetch" href="/assets/js/88.a28f4740.js"><link rel="prefetch" href="/assets/js/89.985f3da2.js"><link rel="prefetch" href="/assets/js/9.7b787617.js"><link rel="prefetch" href="/assets/js/90.b505205d.js"><link rel="prefetch" href="/assets/js/91.d9c75296.js"><link rel="prefetch" href="/assets/js/92.1f35cd99.js"><link rel="prefetch" href="/assets/js/93.2c29b6f6.js"><link rel="prefetch" href="/assets/js/94.34ef265b.js"><link rel="prefetch" href="/assets/js/95.21d31822.js"><link rel="prefetch" href="/assets/js/96.23f09af5.js"><link rel="prefetch" href="/assets/js/97.4509b7d0.js"><link rel="prefetch" href="/assets/js/98.29052fb2.js"><link rel="prefetch" href="/assets/js/99.349e5d9a.js">
    <link rel="stylesheet" href="/assets/css/0.styles.6ae13786.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar" data-v-5bb33761><div data-v-5bb33761><div class="password-shadow password-wrapper-out" style="display:none;" data-v-59e6cb88 data-v-5bb33761 data-v-5bb33761><h3 class="title" data-v-59e6cb88>编程印象</h3> <p class="description" data-v-59e6cb88>我盼世界无 bug</p> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><span data-v-59e6cb88>panfeng</span>
          
        <span data-v-59e6cb88>2017 - </span>
        2023
      </a></span></div></div> <div class="hide" data-v-5bb33761><header class="navbar" data-v-5bb33761><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.png" alt="编程印象" class="logo"> <span class="site-name">编程印象</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/Devops/" class="nav-link"><i class="undefined"></i>
  Devops
</a></li><li class="dropdown-item"><!----> <a href="/categories/SSM/" class="nav-link"><i class="undefined"></i>
  SSM
</a></li><li class="dropdown-item"><!----> <a href="/categories/服务器/" class="nav-link"><i class="undefined"></i>
  服务器
</a></li><li class="dropdown-item"><!----> <a href="/categories/java/" class="nav-link"><i class="undefined"></i>
  java
</a></li><li class="dropdown-item"><!----> <a href="/categories/javaSE专题/" class="nav-link"><i class="undefined"></i>
  javaSE专题
</a></li><li class="dropdown-item"><!----> <a href="/categories/java底层专题/" class="nav-link"><i class="undefined"></i>
  java底层专题
</a></li><li class="dropdown-item"><!----> <a href="/categories/分布式/" class="nav-link"><i class="undefined"></i>
  分布式
</a></li><li class="dropdown-item"><!----> <a href="/categories/ES/" class="nav-link"><i class="undefined"></i>
  ES
</a></li><li class="dropdown-item"><!----> <a href="/categories/并发专题/" class="nav-link"><i class="undefined"></i>
  并发专题
</a></li><li class="dropdown-item"><!----> <a href="/categories/微服务/" class="nav-link"><i class="undefined"></i>
  微服务
</a></li><li class="dropdown-item"><!----> <a href="/categories/数据库/" class="nav-link"><i class="undefined"></i>
  数据库
</a></li><li class="dropdown-item"><!----> <a href="/categories/项目实战/" class="nav-link"><i class="undefined"></i>
  项目实战
</a></li><li class="dropdown-item"><!----> <a href="/categories/book/" class="nav-link"><i class="undefined"></i>
  book
</a></li><li class="dropdown-item"><!----> <a href="/categories/css/" class="nav-link"><i class="undefined"></i>
  css
</a></li><li class="dropdown-item"><!----> <a href="/categories/frontInterviewQuestions/" class="nav-link"><i class="undefined"></i>
  frontInterviewQuestions
</a></li><li class="dropdown-item"><!----> <a href="/categories/html/" class="nav-link"><i class="undefined"></i>
  html
</a></li><li class="dropdown-item"><!----> <a href="/categories/js/" class="nav-link"><i class="undefined"></i>
  js
</a></li><li class="dropdown-item"><!----> <a href="/categories/miniProgram/" class="nav-link"><i class="undefined"></i>
  miniProgram
</a></li><li class="dropdown-item"><!----> <a href="/categories/uniapp/" class="nav-link"><i class="undefined"></i>
  uniapp
</a></li><li class="dropdown-item"><!----> <a href="/categories/vue/" class="nav-link"><i class="undefined"></i>
  vue
</a></li><li class="dropdown-item"><!----> <a href="/categories/QYWX/" class="nav-link"><i class="undefined"></i>
  QYWX
</a></li><li class="dropdown-item"><!----> <a href="/categories/project/" class="nav-link"><i class="undefined"></i>
  project
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间轴
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      工具推荐
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://codesandbox.io" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-coding"></i>
  codeSandbox
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://24kcs.github.io/vue3_study/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-coding"></i>
  vue3+TS
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://tool.oschina.net/uploads/apidocs/jquery/regexp.html" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-coding"></i>
  正则表达式手册
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://caniuse.com/?search=flex" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-coding"></i>
  兼容性查询(前端)
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://httpbin.org/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-coding"></i>
  API请求测试
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://ps.gaoding.com/#/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-coding"></i>
  在线PS
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.tiobe.com/tiobe-index/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-coding"></i>
  编程语言排行榜
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.remove.bg/zh" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-coding"></i>
  一键去除背景
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://snippet-generator.app/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-coding"></i>
  快速生成代码片段
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      关于
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://gitee.com/pf_java_development" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-mayun"></i>
  码云
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-5bb33761></div> <aside class="sidebar" data-v-5bb33761><div class="personal-info-wrapper" data-v-1fad0c41 data-v-5bb33761><img src="/avatar.png" alt="author-avatar" class="personal-img" data-v-1fad0c41> <h3 class="name" data-v-1fad0c41>
    panfeng
  </h3> <div class="num" data-v-1fad0c41><div data-v-1fad0c41><h3 data-v-1fad0c41>247</h3> <h6 data-v-1fad0c41>Articles</h6></div> <div data-v-1fad0c41><h3 data-v-1fad0c41>88</h3> <h6 data-v-1fad0c41>Tags</h6></div></div> <ul class="social-links" data-v-1fad0c41></ul> <hr data-v-1fad0c41></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/Devops/" class="nav-link"><i class="undefined"></i>
  Devops
</a></li><li class="dropdown-item"><!----> <a href="/categories/SSM/" class="nav-link"><i class="undefined"></i>
  SSM
</a></li><li class="dropdown-item"><!----> <a href="/categories/服务器/" class="nav-link"><i class="undefined"></i>
  服务器
</a></li><li class="dropdown-item"><!----> <a href="/categories/java/" class="nav-link"><i class="undefined"></i>
  java
</a></li><li class="dropdown-item"><!----> <a href="/categories/javaSE专题/" class="nav-link"><i class="undefined"></i>
  javaSE专题
</a></li><li class="dropdown-item"><!----> <a href="/categories/java底层专题/" class="nav-link"><i class="undefined"></i>
  java底层专题
</a></li><li class="dropdown-item"><!----> <a href="/categories/分布式/" class="nav-link"><i class="undefined"></i>
  分布式
</a></li><li class="dropdown-item"><!----> <a href="/categories/ES/" class="nav-link"><i class="undefined"></i>
  ES
</a></li><li class="dropdown-item"><!----> <a href="/categories/并发专题/" class="nav-link"><i class="undefined"></i>
  并发专题
</a></li><li class="dropdown-item"><!----> <a href="/categories/微服务/" class="nav-link"><i class="undefined"></i>
  微服务
</a></li><li class="dropdown-item"><!----> <a href="/categories/数据库/" class="nav-link"><i class="undefined"></i>
  数据库
</a></li><li class="dropdown-item"><!----> <a href="/categories/项目实战/" class="nav-link"><i class="undefined"></i>
  项目实战
</a></li><li class="dropdown-item"><!----> <a href="/categories/book/" class="nav-link"><i class="undefined"></i>
  book
</a></li><li class="dropdown-item"><!----> <a href="/categories/css/" class="nav-link"><i class="undefined"></i>
  css
</a></li><li class="dropdown-item"><!----> <a href="/categories/frontInterviewQuestions/" class="nav-link"><i class="undefined"></i>
  frontInterviewQuestions
</a></li><li class="dropdown-item"><!----> <a href="/categories/html/" class="nav-link"><i class="undefined"></i>
  html
</a></li><li class="dropdown-item"><!----> <a href="/categories/js/" class="nav-link"><i class="undefined"></i>
  js
</a></li><li class="dropdown-item"><!----> <a href="/categories/miniProgram/" class="nav-link"><i class="undefined"></i>
  miniProgram
</a></li><li class="dropdown-item"><!----> <a href="/categories/uniapp/" class="nav-link"><i class="undefined"></i>
  uniapp
</a></li><li class="dropdown-item"><!----> <a href="/categories/vue/" class="nav-link"><i class="undefined"></i>
  vue
</a></li><li class="dropdown-item"><!----> <a href="/categories/QYWX/" class="nav-link"><i class="undefined"></i>
  QYWX
</a></li><li class="dropdown-item"><!----> <a href="/categories/project/" class="nav-link"><i class="undefined"></i>
  project
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间轴
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      工具推荐
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://codesandbox.io" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-coding"></i>
  codeSandbox
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://24kcs.github.io/vue3_study/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-coding"></i>
  vue3+TS
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://tool.oschina.net/uploads/apidocs/jquery/regexp.html" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-coding"></i>
  正则表达式手册
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://caniuse.com/?search=flex" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-coding"></i>
  兼容性查询(前端)
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://httpbin.org/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-coding"></i>
  API请求测试
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://ps.gaoding.com/#/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-coding"></i>
  在线PS
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.tiobe.com/tiobe-index/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-coding"></i>
  编程语言排行榜
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.remove.bg/zh" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-coding"></i>
  一键去除背景
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://snippet-generator.app/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-coding"></i>
  快速生成代码片段
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      关于
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://gitee.com/pf_java_development" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-mayun"></i>
  码云
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav> <!----> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-59e6cb88 data-v-5bb33761><h3 class="title" data-v-59e6cb88>秒杀系统减库存以及防刷限流实战</h3> <!----> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><span data-v-59e6cb88>panfeng</span>
          
        <span data-v-59e6cb88>2017 - </span>
        2023
      </a></span></div></div> <div data-v-5bb33761><div data-v-5bb33761><main class="page" style="padding-right:0;"><section style="display:;"><div class="page-title"><h1 class="title">秒杀系统减库存以及防刷限流实战</h1> <div data-v-8a445198><i class="iconfont reco-account" data-v-8a445198><span data-v-8a445198>panfeng</span></i> <i class="iconfont reco-date" data-v-8a445198><span data-v-8a445198>8/15/2021</span></i> <!----> <i class="tags iconfont reco-tag" data-v-8a445198><span class="tag-item" data-v-8a445198>电商</span></i></div></div> <div class="theme-reco-content content__default"><h1 id="秒杀系统减库存以及防刷限流实战"><a href="#秒杀系统减库存以及防刷限流实战" class="header-anchor">#</a> <strong>秒杀系统减库存以及防刷限流实战</strong></h1> <h1 id="_1-同步下单"><a href="#_1-同步下单" class="header-anchor">#</a> 1.同步下单</h1> <p>优点： 方案简单，在连接不多的情况响应迅速</p> <p>缺点： 随着请求连接增多，DB性能急剧下降，导致大量请求阻塞，整个服务集群无法正常提供服务。</p> <p><img src="https://cdn.nlark.com/yuque/0/2020/png/1300531/1595225442069-2a6e76f1-0a02-4e71-a54d-cdd5c2ed9468.png?x-oss-process=image%2Fwatermark%2Ctype_d3F5LW1pY3JvaGVp%2Csize_36%2Ctext_6bKB54-t5a2m6Zmi5Ye65ZOB%2Ccolor_FFFFFF%2Cshadow_50%2Ct_80%2Cg_se%2Cx_10%2Cy_10" alt="img"></p> <h2 id="_2-rocketmq异步下单"><a href="#_2-rocketmq异步下单" class="header-anchor">#</a> 2.RocketMQ异步下单</h2> <p>RocketMQ架构图</p> <p><img src="https://cdn.nlark.com/yuque/0/2020/png/1300531/1595225442036-097ad1fd-fa14-48ef-a81c-e2fd6a3e977f.png?x-oss-process=image%2Fwatermark%2Ctype_d3F5LW1pY3JvaGVp%2Csize_38%2Ctext_6bKB54-t5a2m6Zmi5Ye65ZOB%2Ccolor_FFFFFF%2Cshadow_50%2Ct_80%2Cg_se%2Cx_10%2Cy_10" alt="img"></p> <p>MQ消息队列处理订单：</p> <p>异步：可以处理更多订单</p> <p>削峰：更高吞吐能力和消息堆积能力</p> <p>=》在处理高并发请求时性能和吞吐量更高</p> <p>异步下单流程：</p> <ul><li><p>业务类构建订单DTO</p></li> <li><p>消息生产者发送消息返回创建订单中</p></li> <li><p>客户端轮训订单状态</p></li> <li><p>消费消费者 消费订单消息，生成订单，修改订单状态</p></li> <li><p>下单完成</p></li></ul> <p><img src="https://cdn.nlark.com/yuque/0/2020/png/1300531/1595225443018-ae79c8e3-7174-43d3-b8e3-34ac124ee062.png?x-oss-process=image%2Fwatermark%2Ctype_d3F5LW1pY3JvaGVp%2Csize_42%2Ctext_6bKB54-t5a2m6Zmi5Ye65ZOB%2Ccolor_FFFFFF%2Cshadow_50%2Ct_80%2Cg_se%2Cx_10%2Cy_10" alt="img"></p> <h2 id="_2-1-mq生产者"><a href="#_2-1-mq生产者" class="header-anchor">#</a> 2.1 MQ生产者</h2> <p><strong>生产者发送消息</strong></p> <p>@Slf4j</p> <p>@Component</p> <p>public class OrderMessageSender {</p> <p>.......</p> <p>/**</p> <p>* 发送订单消息</p> <p>* @return</p> <p>*/</p> <p>public boolean sendCreateOrderMsg(OrderMessage message){</p> <p>SendResult result = rocketMQTemplate.syncSend(asyncOrderTopic+&quot;:&quot;+ORDERTAG,message);</p> <p>return SendStatus.SEND_OK == result.getSendStatus();</p> <p><strong>业务发送订单处理</strong></p> <ul><li><strong>发送消息</strong></li> <li><strong>发送成功=》设置 订单状态 ： 1-》下单中   -1-》失败   大于1-&gt;订 单号</strong></li> <li><strong>发送失败 =》还原预减库存，删除本地 售罄标识，发送消息同步标****识</strong></li></ul> <p>@Slf4j</p> <p>@Service</p> <p>public class SecKillOrderServiceImpl implements SecKillOrderService {</p> <p>..............</p> <p>OrderMessage orderMessage = new OrderMessage();</p> <p>orderMessage.setOrder(order);</p> <p>orderMessage.setOrderItem(orderItem);</p> <p>orderMessage.setFlashPromotionRelationId(product.getFlashPromotionRelationId());</p> <p>orderMessage.setFlashPromotionLimit(product.getFlashPromotionLimit());</p> <p>orderMessage.setFlashPromotionEndDate(product.getFlashPromotionEndDate());</p> <p>Map&lt;String,Object&gt; result = new HashMap&lt;&gt;();</p> <p>List<OmsOrderItem> itemList = new ArrayList&lt;&gt;();</OmsOrderItem></p> <p>itemList.add(orderItem);</p> <p>result.put(&quot;order&quot;,order);</p> <p>result.put(&quot;orderItemList&quot;,itemList);</p> <p>try {</p> <p>boolean sendStatus = orderMessageSender.sendCreateOrderMsg(orderMessage);</p> <p>if(sendStatus){</p> <p>​    /*</p> <p>​     * 打上排队的标记</p> <p>​     */</p> <p>​    redisOpsUtil.set(RedisKeyPrefixConst.MIAOSHA_ASYNC_WAITING_PREFIX + memberId + &quot;:&quot; + productId</p> <p>​        ,Integer.toString(1),60, TimeUnit.SECONDS);</p> <p>​    /*</p> <p>​     * 下单方式0-&gt;同步下单,1-&gt;异步下单排队中,-1-&gt;秒杀失败</p> <p>​     */</p> <p>​    result.put(&quot;orderStatus&quot;,1);</p> <p>}else{</p> <p>​    /*</p> <p>​     * 还原预减库存</p> <p>​     */</p> <p>​    incrRedisStock(productId);</p> <p>​    /*</p> <p>​     * 清除掉本地guavacache已经售完的标记</p> <p>​     */</p> <p>​    cache.remove(RedisKeyPrefixConst.MIAOSHA_STOCK_CACHE_PREFIX + productId);</p> <p>​    //通知服务群,清除本地售罄标记缓存</p> <p>​    if(shouldPublishCleanMsg(productId)){</p> <p>​      redisOpsUtil.publish(&quot;cleanNoStockCache&quot;,productId);</p> <p>​    }</p> <p>​    result.put(&quot;orderStatus&quot;,-1);</p> <p>​    return CommonResult.failed(result,&quot;下单失败&quot;);</p> <p>}</p> <p>} catch (Exception e) {</p> <p>log.error(&quot;消息发送失败:error msg:{}&quot;,e.getMessage(),e.getCause());</p> <p>/*</p> <p>* 还原预减库存</p> <p>*/</p> <p>incrRedisStock(productId);</p> <p>/*</p> <p>* 清除掉本地guavacache已经售完的标记</p> <p>*/</p> <p>cache.remove(RedisKeyPrefixConst.MIAOSHA_STOCK_CACHE_PREFIX + productId);</p> <p>//通知服务群,清除本地售罄标记缓存</p> <p>if(shouldPublishCleanMsg(productId)) {</p> <p>​    redisOpsUtil.publish(&quot;cleanNoStockCache&quot;, productId);</p> <p>}</p> <p>result.put(&quot;orderStatus&quot;,-1);</p> <p>return CommonResult.failed(result,&quot;下单失败&quot;);</p> <h2 id="_2-1-消息消费创建订单"><a href="#_2-1-消息消费创建订单" class="header-anchor">#</a> 2.1  消息消费创建订单</h2> <p>创建消息消费者</p> <p>@Slf4j</p> <p>@Component</p> <p>@RocketMQMessageListener(topic = &quot;${rocketmq.luban.asyncOrderTopic}&quot;,consumerGroup = &quot;${rocketmq.luban.asyncOrderGroup}&quot;)</p> <p>public class AscynCreateOrderReciever implements RocketMQListener<OrderMessage> {</OrderMessage></p> <p>消费消息</p> <p>/**</p> <p>* 异步下单消费消息</p> <p>* @param orderMessage</p> <p>*/</p> <p>@Override</p> <p>public void onMessage(OrderMessage orderMessage) {</p> <p>log.info(&quot;listen the rocketmq message&quot;);</p> <p>Long memberId = orderMessage.getOrder().getMemberId();</p> <p>Long productId = orderMessage.getOrderItem().getProductId();</p> <p>//订单编号,分库分表不用该编号做订单结果标记</p> <p>String orderSn = orderMessage.getOrder().getOrderSn();</p> <p>Integer limit = orderMessage.getFlashPromotionLimit();</p> <p>Date endDate = orderMessage.getFlashPromotionEndDate();</p> <p>try {</p> <p>​    Long orderId = secKillOrderService.asyncCreateOrder(orderMessage.getOrder(),orderMessage.getOrderItem(),orderMessage.getFlashPromotionRelationId());</p> <p>​    //更改排队标记状态,代表已经下单成功,ID设置为snowflake后,用ID作为状态标记</p> <p>​    redisOpsUtil.set(RedisKeyPrefixConst.MIAOSHA_ASYNC_WAITING_PREFIX + memberId</p> <p>​        + &quot;:&quot; + productId,orderId.toString(),60L, TimeUnit.SECONDS);</p> <p>​    /*</p> <p>​     * 设置用户购买次数,(不限制购买次数了,需要可自行放开此处,</p> <p>​     * 并在secKillOrderService.checkConfirm中加入验证)</p> <p>​     */</p> <p>​    /*Integer rebuy = redisOpsUtil.get(RedisKeyPrefixConst.MEMBER_BUYED_MIAOSHA_PREFIX + memberId + &quot;:&quot; + productId,Integer.class);</p> <p>​    if(rebuy != null){</p> <p>​      redisOpsUtil.decr(RedisKeyPrefixConst.MEMBER_BUYED_MIAOSHA_PREFIX + memberId + &quot;:&quot; + productId);</p> <p>​    }else{</p> <p>​      //剩余时间</p> <p>​      Date now = new Date();</p> <p>​      Long expired = endDate.getTime()-now.getTime();</p> <p>​      //打上购买次数标记</p> <p>​      redisOpsUtil.set(RedisKeyPrefixConst.MEMBER_BUYED_MIAOSHA_PREFIX + memberId + &quot;:&quot; + productId,limit-1</p> <p>​          ,expired,TimeUnit.MILLISECONDS);</p> <p>​    }*/</p> <p>} catch (Exception e) {</p> <p>​    log.error(e.getMessage(),e.getCause());</p> <p>​    /*</p> <p>​     * 下单失败</p> <p>​     */</p> <p>​    redisOpsUtil.set(RedisKeyPrefixConst.MIAOSHA_ASYNC_WAITING_PREFIX + memberId</p> <p>​        + &quot;:&quot; + productId,Integer.toString(-1),60L, TimeUnit.SECONDS);</p> <p>​    //还原预减库存</p> <p>​    secKillOrderService.incrRedisStock(productId);</p> <p>​    //清除掉本地guava-cache已经售完的标记</p> <p>​    cache.remove(RedisKeyPrefixConst.MIAOSHA_STOCK_CACHE_PREFIX + productId);</p> <p>​    //通知服务群,清除本地售罄标记缓存</p> <p>​    if(secKillOrderService.shouldPublishCleanMsg(productId)) {</p> <p>​      redisOpsUtil.publish(&quot;cleanNoStockCache&quot;, productId);</p> <p>​    }</p> <p>关于消费消息异常：</p> <ol><li>消费者在未提交订单到db之前异常，需要回补库存。</li> <li>消费者在消费消息并且未提交订单到db之前，JVM崩溃。 服务器未收到消费者ACK，继续投递。</li> <li>消费者提交订单之后JVM崩溃，服务器未收到消费者ACK。消息会继续投递，此时需要校验消息的幂等性。</li></ol> <p>​       消息ID的全局唯一性</p> <p>​       消息在消费消息时首先判断消息ID是否已经存在DB，存在的时候直接返回成功，否则继续创建订单操作。</p> <h2 id="_2-2-订单成功发送延迟消息等待支付"><a href="#_2-2-订单成功发送延迟消息等待支付" class="header-anchor">#</a> 2.2  订单成功发送延迟消息等待支付</h2> <p>延迟消息 ： messageDelayLevel=1s 5s 10s 30s 1m 2m 3m 4m 5m 6m 7m 8m 9m 10m 20m 30m 1h 2h</p> <p>@Transactional</p> <p>public Long asyncCreateOrder(OmsOrder order,OmsOrderItem orderItem,Long flashPromotionRelationId) {</p> <p>//减库存</p> <p>Integer result = miaoShaStockDao.descStock(flashPromotionRelationId, 1);</p> <p>log.info(&quot;异步下单减库存成功&quot;);</p> <p>if (result &lt;= 0) {</p> <p>​    throw new RuntimeException(&quot;没抢到！&quot;);</p> <p>}</p> <p>log.info(&quot;异步下单减库存成功&quot;);</p> <p>//查询订单</p> <p>//插入订单记录</p> <p>orderMapper.insertSelective(order);</p> <p>//OrderItem关联</p> <p>orderItem.setOrderId(order.getId());</p> <p>orderItem.setOrderSn(order.getOrderSn());</p> <p>//插入orderItem</p> <p>orderItemMapper.insertSelective(orderItem);</p> <p>/*</p> <p>* 如果订单创建成功,需要发送定时消息,20min后如果没有支付,则取消当前订单,释放库存</p> <p>* 0</p> <p>* */</p> <p>try {</p> <p>​    boolean sendStatus = orderMessageSender.sendTimeOutOrderMessage(order.getId() + &quot;:&quot; + flashPromotionRelationId + &quot;:&quot; + orderItem.getProductId());</p> <p>​    if (!sendStatus) {</p> <p>​      throw new RuntimeException(&quot;订单超时取消消息发送失败！&quot;);</p> <p>​    }</p> <p>} catch (Exception e) {</p> <p>​    throw new RuntimeException(&quot;订单超时取消消息发送失败！&quot;);</p> <p>}</p> <p>return order.getId();</p> <h2 id="_2-3-超时取消订单"><a href="#_2-3-超时取消订单" class="header-anchor">#</a> 2.3 超时取消订单</h2> <p>/**</p> <p>* 消费监听rocketmq-订单超时消息</p> <p>*/</p> <p>@Slf4j</p> <p>@Component</p> <p>@RocketMQMessageListener(consumerGroup = &quot;${rocketmq.luban.cancelGroup}&quot;, topic = &quot;${rocketmq.luban.scheduleTopic}&quot;)</p> <p>public class RocketMqCancelOrderReciever implements RocketMQListener<String> {</String></p> <p>@Autowired</p> <p>private OmsPortalOrderService omsPortalOrderService;</p> <p>@Autowired</p> <p>private SecKillOrderService secKillOrderService;</p> <p>/**</p> <p>* 延时消息,取消超时订单</p> <p>* @param cancelId</p> <p>*/</p> <p>@Override</p> <p>public void onMessage(String cancelId) {</p> <p>​    log.info(&quot;监听超时订单：&quot;+cancelId);</p> <p>​    if(StringUtils.isEmpty(cancelId)){</p> <p>​      return;</p> <p>​    }</p> <p>​    Long orderId = Long.parseLong(cancelId.split(&quot;😊[0]);</p> <p>​    Long promotionId = Long.parseLong(cancelId.split(&quot;😊[1]);</p> <p>​    Long productId = Long.parseLong(cancelId.split(&quot;😊[2]);</p> <p>​    try {</p> <p>​      //取消的订单,释放DB库存</p> <p>​      omsPortalOrderService.cancelOrder(orderId,promotionId);</p> <p>​      //取消的订单-还原缓存库存</p> <p>​      secKillOrderService.incrRedisStock(productId);</p> <p>​      log.info(&quot;订单取消，orderId:{},productId:{}&quot;,orderId,productId);</p> <p>​    } catch (Exception e) {</p> <p>​      log.error(&quot;订单取消异常 : 还原库存失败，please check:{}&quot;,e.getMessage(),e.getCause());</p> <p>​      throw new RuntimeException();//抛异常出去,rocketmq会重新投递</p> <p>​    }</p> <p>}</p> <ol><li>MQ事务消息</li></ol> <p>RocketMQ事务消息架构：</p> <p><img src="https://cdn.nlark.com/yuque/0/2020/png/1300531/1595225442002-57060036-ee99-4a09-b972-b4b72ba300b7.png?x-oss-process=image%2Fwatermark%2Ctype_d3F5LW1pY3JvaGVp%2Csize_38%2Ctext_6bKB54-t5a2m6Zmi5Ye65ZOB%2Ccolor_FFFFFF%2Cshadow_50%2Ct_80%2Cg_se%2Cx_10%2Cy_10" alt="img"></p> <p><strong>业务场景： 一般适用下单成功后删除购物车 ，计算积分</strong></p> <p>@Slf4j</p> <p>@RocketMQTransactionListener(txProducerGroup = &quot;${rocketmq.luban.transGroup}&quot;)</p> <p>public class TransactionListenerImpl implements RocketMQLocalTransactionListener {</p> <p>private ConcurrentHashMap&lt;String, Integer&gt; localTrans = new ConcurrentHashMap&lt;String, Integer&gt;();</p> <p>private static int maxTryMums = 3;</p> <p>@Override</p> <p>public RocketMQLocalTransactionState executeLocalTransaction(Message msg, Object orderDto) {</p> <p>​    log.info(&quot;------------RocketMQ执行本地订单创建-------------&quot;);</p> <p>​    String transId = (String)msg.getHeaders().get(RocketMQHeaders.PREFIX + RocketMQHeaders.TRANSACTION_ID);</p> <p>​    /**</p> <p>​     *</p> <p>​     * 写你的本地事务执行逻辑</p> <p>​     *</p> <p>​     * */</p> <p>​    //删除购物车  计算订单积分</p> <p>​    localTrans.put(transId, 0);</p> <p>​    return RocketMQLocalTransactionState.UNKNOWN;</p> <p>}</p> <p>@Override</p> <p>public RocketMQLocalTransactionState checkLocalTransaction(Message msg) {</p> <p>​    log.info(&quot;执行事务消息checkLocalTransaction()方法&quot;);</p> <p>​    RocketMQLocalTransactionState retState;</p> <p>​    String transId = (String)msg.getHeaders().get(RocketMQHeaders.PREFIX + RocketMQHeaders.TRANSACTION_ID);</p> <p>​     //查询 购物车是否删除成功</p> <p>​    //查询积分计算是否成功</p> <p>​    int retryTimes = localTrans.get(transId);//事务recheck次数</p> <p>​    int isExists = 0;//订单是否已经生成</p> <p>​    if(retryTimes &lt; maxTryMums &amp;&amp; isExists &gt; 0){</p> <p>​      retState = RocketMQLocalTransactionState.COMMIT;</p> <p>​      localTrans.remove(transId);</p> <p>​    }else if(retryTimes &lt; maxTryMums &amp;&amp; isExists == 0){</p> <p>​      localTrans.put(transId,retryTimes+1);</p> <p>​      retState = RocketMQLocalTransactionState.UNKNOWN;</p> <p>​    }else{</p> <p>​      retState = RocketMQLocalTransactionState.ROLLBACK;</p> <p>​      localTrans.remove(transId);</p> <p>​    }</p> <p>​    log.info(&quot;------ !!!回查订单是否成功提交,msgTransactionId={}, TransactionState={} status={}&quot;, transId, retState, retryTimes);</p> <p>​    return retState;</p> <p>}</p> <p>static class MessageConvertHelper extends MappingJackson2MessageConverter {</p> <p>​    private final static MessageConvertHelper converter;</p> <p>​    static{</p> <p>​      converter = new MessageConvertHelper();</p> <p>​    }</p> <p>​    public static Object convert(Message&lt;?&gt; message, Class&lt;?&gt; targetClass){</p> <p>​      return converter.convertFromInternal(message,targetClass,null);</p> <p>​    }</p> <ol><li>秒杀系统的压测</li></ol> <h2 id="_4-1-批量生成用户账户信息"><a href="#_4-1-批量生成用户账户信息" class="header-anchor">#</a> 4.1 批量生成用户账户信息</h2> <p><img src="https://cdn.nlark.com/yuque/0/2020/png/1300531/1595225442036-14539484-8ce2-49dd-9b77-e1d74ad5113a.png?x-oss-process=image%2Fwatermark%2Ctype_d3F5LW1pY3JvaGVp%2Csize_54%2Ctext_6bKB54-t5a2m6Zmi5Ye65ZOB%2Ccolor_FFFFFF%2Cshadow_50%2Ct_80%2Cg_se%2Cx_10%2Cy_10" alt="img"></p> <p><img src="https://cdn.nlark.com/yuque/0/2020/png/1300531/1595225442078-08f1809b-0011-4564-b9b0-2db12da43f21.png?x-oss-process=image%2Fwatermark%2Ctype_d3F5LW1pY3JvaGVp%2Csize_51%2Ctext_6bKB54-t5a2m6Zmi5Ye65ZOB%2Ccolor_FFFFFF%2Cshadow_50%2Ct_80%2Cg_se%2Cx_10%2Cy_10" alt="img"></p> <h2 id="_4-2-批量生成jwt-token"><a href="#_4-2-批量生成jwt-token" class="header-anchor">#</a> 4.2 批量生成JWT token</h2> <p><img src="https://cdn.nlark.com/yuque/0/2020/png/1300531/1595225442030-7c9f2e53-5976-418b-93a0-6c1d1ff03f49.png?x-oss-process=image%2Fwatermark%2Ctype_d3F5LW1pY3JvaGVp%2Csize_52%2Ctext_6bKB54-t5a2m6Zmi5Ye65ZOB%2Ccolor_FFFFFF%2Cshadow_50%2Ct_80%2Cg_se%2Cx_10%2Cy_10" alt="img"></p> <p><img src="https://cdn.nlark.com/yuque/0/2020/png/1300531/1595225442074-c3760f41-d53b-4e4a-82e9-f2d747e852c3.png?x-oss-process=image%2Fwatermark%2Ctype_d3F5LW1pY3JvaGVp%2Csize_54%2Ctext_6bKB54-t5a2m6Zmi5Ye65ZOB%2Ccolor_FFFFFF%2Cshadow_50%2Ct_80%2Cg_se%2Cx_10%2Cy_10" alt="img"></p> <p><img src="https://cdn.nlark.com/yuque/0/2020/png/1300531/1595225442210-81862fa7-551b-4ec9-a020-602e9061ce7c.png?x-oss-process=image%2Fwatermark%2Ctype_d3F5LW1pY3JvaGVp%2Csize_35%2Ctext_6bKB54-t5a2m6Zmi5Ye65ZOB%2Ccolor_FFFFFF%2Cshadow_50%2Ct_80%2Cg_se%2Cx_10%2Cy_10" alt="img"></p> <p><img src="https://cdn.nlark.com/yuque/0/2020/png/1300531/1595225442040-49c32116-4e8b-4387-994e-e0f65d0ef922.png?x-oss-process=image%2Fwatermark%2Ctype_d3F5LW1pY3JvaGVp%2Csize_53%2Ctext_6bKB54-t5a2m6Zmi5Ye65ZOB%2Ccolor_FFFFFF%2Cshadow_50%2Ct_80%2Cg_se%2Cx_10%2Cy_10" alt="img"></p> <h2 id="_4-3-jmeter设置config-data"><a href="#_4-3-jmeter设置config-data" class="header-anchor">#</a> 4.3 Jmeter设置config Data</h2> <p>设置jwt token变量名：Authorization</p> <p><img src="https://cdn.nlark.com/yuque/0/2020/png/1300531/1595225442140-4e784215-02c4-45d8-8661-6b890c7ba197.png?x-oss-process=image%2Fwatermark%2Ctype_d3F5LW1pY3JvaGVp%2Csize_50%2Ctext_6bKB54-t5a2m6Zmi5Ye65ZOB%2Ccolor_FFFFFF%2Cshadow_50%2Ct_80%2Cg_se%2Cx_10%2Cy_10" alt="img"></p> <h2 id="_4-4-设置请求head"><a href="#_4-4-设置请求head" class="header-anchor">#</a> 4.4 设置请求head</h2> <p>设置请求头</p> <p>Authorization： ${Authorization}</p> <p>Content-Type：application/json</p> <p><img src="https://cdn.nlark.com/yuque/0/2020/png/1300531/1595225442172-d20b9d41-1b3d-42e7-8aee-5b4a5b826cbb.png?x-oss-process=image%2Fwatermark%2Ctype_d3F5LW1pY3JvaGVp%2Csize_49%2Ctext_6bKB54-t5a2m6Zmi5Ye65ZOB%2Ccolor_FFFFFF%2Cshadow_50%2Ct_80%2Cg_se%2Cx_10%2Cy_10" alt="img"></p> <h2 id="_4-5-设置并发请求数"><a href="#_4-5-设置并发请求数" class="header-anchor">#</a> 4.5 设置并发请求数</h2> <p><img src="https://cdn.nlark.com/yuque/0/2020/png/1300531/1595225442066-d28b7cc2-af59-4a71-9587-0c62e18d36d5.png?x-oss-process=image%2Fwatermark%2Ctype_d3F5LW1pY3JvaGVp%2Csize_39%2Ctext_6bKB54-t5a2m6Zmi5Ye65ZOB%2Ccolor_FFFFFF%2Cshadow_50%2Ct_80%2Cg_se%2Cx_10%2Cy_10" alt="img"></p> <h2 id=""><a href="#" class="header-anchor">#</a></h2> <h2 id="_4-6-设置请求报文体"><a href="#_4-6-设置请求报文体" class="header-anchor">#</a> 4.6 设置请求报文体</h2> <p>请求URL : http://localhost:8888/order/secKill/generateOrder</p> <p>方法类型： post</p> <p>报文体： {</p> <p>&quot;itemIds&quot;: [</p> <p>27</p> <p>],</p> <p>&quot;memberReceiveAddressId&quot;: 1,</p> <p>&quot;payType&quot;: 1,</p> <p>&quot;couponId&quot;:2,</p> <p>&quot;useIntegration&quot;: 100</p> <p>}</p> <p><img src="https://cdn.nlark.com/yuque/0/2020/png/1300531/1595225442063-19359122-01c4-4195-8fdc-c22758d41f64.png?x-oss-process=image%2Fwatermark%2Ctype_d3F5LW1pY3JvaGVp%2Csize_40%2Ctext_6bKB54-t5a2m6Zmi5Ye65ZOB%2Ccolor_FFFFFF%2Cshadow_50%2Ct_80%2Cg_se%2Cx_10%2Cy_10" alt="img"></p> <h1 id="-2"><a href="#-2" class="header-anchor">#</a></h1> <h2 id="_4-7-清理redis缓存"><a href="#_4-7-清理redis缓存" class="header-anchor">#</a> 4.7 清理redis缓存</h2> <p>&gt; flushdb</p> <h1 id="-3"><a href="#-3" class="header-anchor">#</a></h1> <h2 id="_4-8-服务启动"><a href="#_4-8-服务启动" class="header-anchor">#</a> 4.8  服务启动</h2> <p>先后启动 luban-auth  ,luban-gateway,luban-member,luban-product,luban-order.</p> <p><img src="https://cdn.nlark.com/yuque/0/2020/png/1300531/1595225442210-9eb257e8-1cd2-42b7-96b3-68c2b3ec7397.png?x-oss-process=image%2Fwatermark%2Ctype_d3F5LW1pY3JvaGVp%2Csize_51%2Ctext_6bKB54-t5a2m6Zmi5Ye65ZOB%2Ccolor_FFFFFF%2Cshadow_50%2Ct_80%2Cg_se%2Cx_10%2Cy_10" alt="img"></p> <h2 id="_4-9-开启压测"><a href="#_4-9-开启压测" class="header-anchor">#</a> 4.9 开启压测</h2> <p><img src="https://cdn.nlark.com/yuque/0/2020/png/1300531/1595225442073-e360750c-c5bd-495a-ae68-86fa0f93bad7.png?x-oss-process=image%2Fwatermark%2Ctype_d3F5LW1pY3JvaGVp%2Csize_53%2Ctext_6bKB54-t5a2m6Zmi5Ye65ZOB%2Ccolor_FFFFFF%2Cshadow_50%2Ct_80%2Cg_se%2Cx_10%2Cy_10" alt="img"></p> <ol><li>秒杀验证码流程</li></ol> <h2 id="_5-1-生成验证码"><a href="#_5-1-生成验证码" class="header-anchor">#</a> 5.1 生成验证码</h2> <h3 id="_5-1-1-创建验证码"><a href="#_5-1-1-创建验证码" class="header-anchor">#</a> 5.1.1 创建验证码</h3> <p>/**</p> <p>* 创建验证码</p> <p>*/</p> <p>public static VerifyCodeInfo createVerifyCode() {</p> <p>int width = 80;</p> <p>int height = 32;</p> <p>//create the image</p> <p>BufferedImage image = new BufferedImage(width, height, BufferedImage.TYPE_INT_RGB);</p> <p>Graphics g = image.getGraphics();</p> <p>// set the background color</p> <p>g.setColor(new Color(0xDCDCDC));</p> <p>g.fillRect(0, 0, width, height);</p> <p>// draw the border</p> <p>g.setColor(Color.black);</p> <p>g.drawRect(0, 0, width - 1, height - 1);</p> <p>// create a random instance to generate the codes</p> <p>Random rdm = new Random();</p> <p>// make some confusion</p> <p>for (int i = 0; i &lt; 50; i++) {</p> <p>​    int x = rdm.nextInt(width);</p> <p>​    int y = rdm.nextInt(height);</p> <p>​    g.drawOval(x, y, 0, 0);</p> <p>}</p> <p>// generate a random code</p> <p>String verifyCode = generateVerifyCode(rdm);</p> <p>g.setColor(new Color(0, 100, 0));</p> <p>g.setFont(new Font(&quot;Candara&quot;, Font.BOLD, 24));</p> <p>g.drawString(verifyCode, 8, 24);</p> <p>g.dispose();</p> <p>//把验证码存到redis中</p> <p>Integer result = calc(verifyCode);</p> <p>if (result == null) {</p> <p>​    return null;</p> <p>}</p> <p>//输出结果</p> <p>return new VerifyCodeInfo(image,result);</p> <p>}</p> <h3 id="_5-1-2-验证码答案存储在redis"><a href="#_5-1-2-验证码答案存储在redis" class="header-anchor">#</a> 5.1.2 验证码答案存储在redis</h3> <p>@RequestMapping(value=&quot;/verifyCode&quot;, method=RequestMethod.GET)</p> <p>@ResponseBody</p> <p>public CommonResult getVerifyCode(HttpServletRequest request,</p> <p>​                 HttpServletResponse response,</p> <p>​                 @RequestParam(&quot;productId&quot;) Long productId,</p> <p>​                 @RequestHeader(&quot;memberId&quot;) Long memberId){</p> <p>try {</p> <p>​    VerifyCodeImgUtil.VerifyCodeInfo imageInfo = VerifyCodeImgUtil.createVerifyCode();</p> <p>​    log.info(&quot;验证码答案:{}&quot;,imageInfo.getResult());</p> <p>​    //todo 验证码答案写入到redis</p> <p>​    redisOpsUtil.set(RedisKeyPrefixConst.MIAOSHA_VERIFY_CODE_PREFIX + memberId + &quot;:&quot; + productId //全局唯一ID</p> <p>​        ,imageInfo.getResult()</p> <p>​        ,300</p> <p>​        ,TimeUnit.SECONDS);</p> <p>​    response.setHeader(&quot;Content-Type&quot;, &quot;image/jpeg&quot;);</p> <p>​    OutputStream out = response.getOutputStream();</p> <p>​    ImageIO.write(imageInfo.getBufferedImage(), &quot;JPEG&quot;, out);</p> <p>​    out.flush();</p> <p>​    out.close();</p> <p>​    return null;</p> <p>​    /**</p> <p>​     * 返回图片的base64编码,js解码成图片</p> <p>​     */</p> <p>​    /*ByteArrayOutputStream baos = new ByteArrayOutputStream();//io流</p> <p>​    ImageIO.write(imageInfo.getBufferedImage(), &quot;png&quot;, baos);//写入流中</p> <p>​    byte[] bytes = baos.toByteArray();//转换成字节</p> <p>​    BASE64Encoder encoder = new BASE64Encoder();</p> <p>​    String png_base64 =  encoder.encodeBuffer(bytes).trim();//转换成base64串</p> <p>​    png_base64 = png_base64.replaceAll(&quot;\n&quot;, &quot;&quot;).replaceAll(&quot;\r&quot;, &quot;&quot;);//删除 \r\n</p> <p>​    return CommonResult.success(png_base64);*/</p> <p>}catch(Exception e) {</p> <p>​    e.printStackTrace();</p> <p>​    return CommonResult.failed(&quot;秒杀失败&quot;);</p> <h3 id="_5-1-3-测试验证码生成"><a href="#_5-1-3-测试验证码生成" class="header-anchor">#</a> 5.1.3 测试验证码生成</h3> <p><img src="https://cdn.nlark.com/yuque/0/2020/png/1300531/1595225442074-9ba36259-9b96-443a-b0af-986aea369e62.png?x-oss-process=image%2Fwatermark%2Ctype_d3F5LW1pY3JvaGVp%2Csize_53%2Ctext_6bKB54-t5a2m6Zmi5Ye65ZOB%2Ccolor_FFFFFF%2Cshadow_50%2Ct_80%2Cg_se%2Cx_10%2Cy_10" alt="img"></p> <h2 id="_5-2-校验验证码"><a href="#_5-2-校验验证码" class="header-anchor">#</a> 5.2 校验验证码</h2> <h3 id="_5-2-1-提交验证码"><a href="#_5-2-1-提交验证码" class="header-anchor">#</a> 5.2.1 提交验证码</h3> <p>@RequestMapping(value=&quot;/token&quot;, method=RequestMethod.GET)</p> <p>@ResponseBody</p> <p>public CommonResult getMiaoshaToken(HttpServletRequest request</p> <p>​    , @RequestParam(&quot;productId&quot;) Long productId</p> <p>​    , @RequestHeader(&quot;memberId&quot;) Long memberId</p> <p>​    , @RequestParam Integer verifyCode) {</p> <p>/*</p> <p>* 用redis限流，限制接口1分钟最多访问10000次</p> <p>*/</p> <p>String requestURI = request.getRequestURI().toString();</p> <p>Long requestNum = redisOpsUtil.incr(requestURI);</p> <p>if (requestNum == 1) {</p> <p>​    redisOpsUtil.expire(requestURI,60, TimeUnit.SECONDS);</p> <p>} else if (requestNum &gt; 10000) {</p> <p>​    return CommonResult.failed(&quot;访问超载，请稍后再试&quot;);</p> <p>}</p> <p>String verifyCodeKey = RedisKeyPrefixConst.MIAOSHA_VERIFY_CODE_PREFIX + memberId + &quot;:&quot; + productId;</p> <p>/*</p> <p>* 校验验证码，防止接口被刷</p> <p>*/</p> <p>Integer redisCode = redisOpsUtil.get(verifyCodeKey,Integer.class);</p> <p>if(StringUtils.isEmpty(redisCode) || !redisCode.equals(verifyCode)) {</p> <p>​    return CommonResult.failed(&quot;验证码错误&quot;);</p> <p>}</p> <p>//验证成功,删除该验证码</p> <p>redisOpsUtil.delete(verifyCodeKey);</p> <p>//todo 创建token</p> <p>String token = MD5.md5(UUID.randomUUID().toString());</p> <p>log.info(&quot;miaosha token:{}&quot;,token);</p> <p>redisOpsUtil.set(RedisKeyPrefixConst.MIAOSHA_TOKEN_PREFIX + memberId + &quot;:&quot; + productId</p> <p>​      ,token</p> <p>​      ,300</p> <p>​      ,TimeUnit.SECONDS);</p> <p>return CommonResult.success(toke</p> <h3 id="_5-2-2-校验验证码答案"><a href="#_5-2-2-校验验证码答案" class="header-anchor">#</a> 5.2.2  校验验证码答案</h3> <p><img src="https://cdn.nlark.com/yuque/0/2020/png/1300531/1595225442340-f08f6c1c-7a8c-4de3-a603-ad61eb2e4ea5.png?x-oss-process=image%2Fwatermark%2Ctype_d3F5LW1pY3JvaGVp%2Csize_53%2Ctext_6bKB54-t5a2m6Zmi5Ye65ZOB%2Ccolor_FFFFFF%2Cshadow_50%2Ct_80%2Cg_se%2Cx_10%2Cy_10" alt="img"></p></div></section> <footer class="page-edit"><!----> <!----></footer> <!----> <div class="comments-wrapper"><!----></div> <ul class="side-bar sub-sidebar-wrapper" style="width:0;" data-v-ac050c62></ul></main></div> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div><div class="kanbanniang" data-v-5775ee02><div class="banniang-container" style="display:;" data-v-5775ee02><div class="messageBox" style="right:68px;bottom:290px;display:none;" data-v-5775ee02>
      欢迎来到我的博客
    </div> <div class="operation" style="right:90px;bottom:40px;display:;" data-v-5775ee02><i class="kbnfont kbn-ban-home ban-home" data-v-5775ee02></i> <i class="kbnfont kbn-ban-message message" data-v-5775ee02></i> <i class="kbnfont kbn-ban-close close" data-v-5775ee02></i> <a target="_blank" href="https://vuepress-theme-reco.recoluan.com/views/plugins/kanbanniang.html" data-v-5775ee02><i class="kbnfont kbn-ban-info info" data-v-5775ee02></i></a> <i class="kbnfont kbn-ban-theme skin" style="display:;" data-v-5775ee02></i></div> <canvas id="banniang" width="250" height="320" class="live2d" style="right:90px;bottom:-20px;opacity:0.9;" data-v-5775ee02></canvas></div> <div class="showBanNiang" style="display:none;" data-v-5775ee02>
    看板娘
  </div></div><div class="reco-bgm-panel" data-v-b1d3339e><audio id="bgm" src="https://assets.smallsunnyfox.com/music/2.mp3" data-v-b1d3339e></audio> <div class="reco-float-box" style="bottom:200px;z-index:999999;display:none;" data-v-b1d3339e data-v-41bcba48 data-v-b1d3339e><img src="https://assets.smallsunnyfox.com/music/2.jpg" data-v-b1d3339e></div> <div class="reco-bgm-box" style="left:10px;bottom:10px;z-index:999999;" data-v-b1d3339e data-v-41bcba48 data-v-b1d3339e><div class="reco-bgm-cover" style="background-image:url(https://assets.smallsunnyfox.com/music/2.jpg);" data-v-b1d3339e><div class="mini-operation" style="display:none;" data-v-b1d3339e><i class="reco-bgm reco-bgm-pause" style="display:none;" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-play" style="display:none;" data-v-b1d3339e></i></div> <div class="falut-message" style="display:none;" data-v-b1d3339e>
          播放失败
        </div></div> <div class="reco-bgm-info" data-v-b1d3339e data-v-41bcba48 data-v-b1d3339e><div class="info-box" data-v-b1d3339e><i class="reco-bgm reco-bgm-music music" data-v-b1d3339e></i>강남역 4번 출구</div> <div class="info-box" data-v-b1d3339e><i class="reco-bgm reco-bgm-artist" data-v-b1d3339e></i>Plastic / Fallin` Dild</div> <div class="reco-bgm-progress" data-v-b1d3339e><div class="progress-bar" data-v-b1d3339e><div class="bar" data-v-b1d3339e></div></div></div> <div class="reco-bgm-operation" data-v-b1d3339e><i class="reco-bgm reco-bgm-last last" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-pause pause" style="display:none;" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-play play" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-next next" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-volume1 volume" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-mute mute" style="display:none;" data-v-b1d3339e></i> <div class="volume-bar" data-v-b1d3339e><div class="bar" data-v-b1d3339e></div></div></div></div> <div class="reco-bgm-left-box" data-v-b1d3339e data-v-41bcba48 data-v-b1d3339e><i class="reco-bgm reco-bgm-left" data-v-b1d3339e></i></div></div></div><canvas id="vuepress-canvas-cursor"></canvas><!----><div class="RibbonAnimation"></div></div></div>
    <script src="/assets/js/app.d528fc5a.js" defer></script><script src="/assets/js/3.fb47a76d.js" defer></script><script src="/assets/js/1.fc79f8d4.js" defer></script><script src="/assets/js/205.177b11ad.js" defer></script>
  </body>
</html>
